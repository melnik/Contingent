<!ATTR __conditions__ agreement resolution from liabilities card_number group_id deadline deadline2 circumstance !>
<!-- Generated by details-generator. Do not edit! -->
<script src='/tools/datecontrol.js'></script>
<script src='/tools/groupcontrol.js'></script>

<script language='javascript'><!--
function list_change(name, suffix)
{
	var f = document.mf;
	eval('f.keep_' + name + '_' + suffix + '.value = (f.keep_' + name + '_' + suffix + '.value == "1" ? "0" : "1");');
	f.submit();
}
//--></script>
<br/>
Обстоятельство
<select name='circumstance' onChange='circumstance_change();'>
	<option value='0'<% if circumstance == '0'.to_i then print " selected='1'" end %>>после академического отпуска (по медицинским показаниям)</option>
	<option value='1'<% if circumstance == '1'.to_i then print " selected='1'" end %>>после академического отпуска</option>
	<option value='3'<% if circumstance == '3'.to_i then print " selected='1'" end %>>после стажировки</option>
	<option value='4'<% if circumstance == '4'.to_i then print " selected='1'" end %>>после отпуска по беременности и родам</option>
	<option value='5'<% if circumstance == '5'.to_i then print " selected='1'" end %>>после отпуска по уходу за ребенком (1,5 лет)</option>
	<option value='6'<% if circumstance == '6'.to_i then print " selected='1'" end %>>после отпуска по уходу за ребенком (3 года)</option>
</select>
<div id='circumstance_0' <% if circumstance != '0'.to_i then print " style='display: none'" end %>>
	Заключение клинико-экспертной комиссии
	&#x2116; <input type='text' name='resolution_num' value='<&resolution['num']&>' />
	от <&import('/widgets/date', 'resolution_date', resolution['date'])&>
</div>
<div id='circumstance_2' <% if circumstance != '3'.to_i then print " style='display: none'" end %>>
	Срок прохождения промежуточной аттестации
	<&import('/widgets/date', 'deadline2', deadline2)&>
</div>

<script language='javascript'><!--
var circumstance_old_shown = null;
function circumstance_convert(value)
{
	if (value == '0') return 'circumstance_0';
	if (value == '1') return 'circumstance_1';
	if (value == '3') return 'circumstance_2';
	if (value == '4') return 'circumstance_3';
	if (value == '5') return 'circumstance_4';
	if (value == '6') return 'circumstance_5';

	return null;
}
function circumstance_change()
{
	var new_shown = document.mf.circumstance.value;
	if (circumstance_old_shown != '') {
		var oldobj = document.getElementById(circumstance_convert(circumstance_old_shown));
		if (oldobj)
			oldobj.style.display = 'none';
	}
	circumstance_old_shown = new_shown;
	var newobj = document.getElementById(circumstance_convert(new_shown));
	if (newobj)
		newobj.style.display = '';
}
circumstance_change();
//--></script>
<br/>
Числить в группе
<&import('/widgets/group', 'group_id', { 'group_id' => group_id, 'fixed' => { 'faculty' => true, 'department' => true }})&>
<br/>
Присвоить № л.д.
<input type='text' name='card_number' value='<&card_number&>' />
<br/>
Приступить к занятиям с
<&import('/widgets/date', 'from', from)&>
<br/>
Академические задолженности
<table>
	<tr>
		<th>Название</th>
		<th>Отчетность</th>

		<th>&nbsp;</th>
	</tr>
	<% (liabilities || []).each_with_index { |liabilities_line, liabilities_index| %>
	</tr>
	<tr>
		<td>
			<input type='text' name='liabilities_subject_<&liabilities_index&>' value='<&liabilities_line['subject']&>' />
		</td>
		<td>
			<select name='liabilities_type_<&liabilities_index&>' >
				<option value='зачет'<% if liabilities_line['type'] == 'зачет' then print " selected='1'" end %>>зачет</option>
				<option value='диф.зачет'<% if liabilities_line['type'] == 'диф.зачет' then print " selected='1'" end %>>диф.зачет</option>
				<option value='экзамен'<% if liabilities_line['type'] == 'экзамен' then print " selected='1'" end %>>экзамен</option>
			</select>
		</td>

		<td>
			<input type='hidden' name='keep_liabilities_<&liabilities_index&>' value='1' />
			<a href='javascript:list_change("liabilities", "<&liabilities_index&>");'>
				<img src='/img/remove.png' width='22' height='22' alt='Удалить' title='Удалить' border='0'/>
			</a>
		</td>
	</tr>
	<% } %>
	<tr>
		<td>
			<input type='text' name='liabilities_subject_new' value='<&nil&>' />
		</td>
		<td>
			<select name='liabilities_type_new' >
				<option value='зачет'<% if nil == 'зачет' then print " selected='1'" end %>>зачет</option>
				<option value='диф.зачет'<% if nil == 'диф.зачет' then print " selected='1'" end %>>диф.зачет</option>
				<option value='экзамен'<% if nil == 'экзамен' then print " selected='1'" end %>>экзамен</option>
			</select>
		</td>

		<td>
			<input type='hidden' name='keep_liabilities_new' value='0' />
			<a href='javascript:list_change("liabilities", "new");'>
				<img src='/img/add.png' width='22' height='22' alt='Добавить' title='Добавить' border='0'/>
			</a>
		</td>
	</tr>
	</tr>
</table>
<br/>
<% if not __conditions__['trainee'] then %>
Срок сдачи задолженностей
<&import('/widgets/date', 'deadline', deadline)&>
<% end %>
<br/>
<% if __conditions__['contract'] or __conditions__['foreign'] then %>
Договор/контракт
&#x2116; <input type='text' name='agreement_num' value='<&agreement['num']&>' />
от <&import('/widgets/date', 'agreement_date', agreement['date'])&>
<% end %>
<br/>
