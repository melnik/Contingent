<!ATTR order !>
<!-- Generated by details-generator. Do not edit! -->
<%
_CONDITIONS_ = ::DetailsForExpelationOrder.order_conditions(order)
header = import 'header', order
header.conditions = conditions = _CONDITIONS_

%>
<&header&>
<p></p>
<div style="text-align: center"><h3>ПРИКАЗЫВАЮ:</h3></div>
<%
list = Class.new(Array)
list.class_eval {
	alias_method :_old_find, :find
	def find(params = nil)
		if params.nil?
			_old_find { |item| yield item }
		else
			_old_find { |item| ret = params.collect { |k,v| item[k] == v }.inject(true) { |x,y| x && y } }
		end
	end
}
self.class.class_eval {
	def fetch(obj, method, *args)
		keys = args[-1]
		ret = []
		obj.__send__(method, *args) { |*values|
			h = {}; keys.each_index { |i|
				h[keys[i].intern] = values[i]
			}; ret << h
		}
		ret
	end
}

_SETS_ = []
_GROUPS_ = nil
@students = list.new(
	  fetch(order, :each_student, :all, %w( name student_status card_number study_form profession citizenship passport course group birth_date current_term_number student_id dormitory attributes ))
)
_LIST_ = [@students]

	@groups = _GROUPS_ = list.new(
	fetch(order, :each_group, %w( group_id current_term_number group_num group short_name department_num attributes ))
) if order.respond_to? :each_group

%>

<p>
			<% if conditions['dead'] then %>
				Исключить из списочного состава студентов:
			<% else %>
				Отчислить из МГЛУ нижеперечисленных лиц:
			<% end %>
		</p>

<% _ITEM_INDEX_ = 0 %>
<% _LIST_[-1].each { |_ITEM_|
	name = _ITEM_[:name]
	student_status = _ITEM_[:student_status]
	card_number = _ITEM_[:card_number]
	study_form = _ITEM_[:study_form]
	profession = _ITEM_[:profession]
	citizenship = _ITEM_[:citizenship]
	passport = _ITEM_[:passport]
	course = _ITEM_[:course]
	group = _ITEM_[:group]
	birth_date = _ITEM_[:birth_date]
	current_term_number = _ITEM_[:current_term_number]
	student_id = _ITEM_[:student_id]
	dormitory = _ITEM_[:dormitory]
	attributes = _ITEM_[:attributes]
%>
	<h3>&#167; <%= _ITEM_INDEX_ = _ITEM_INDEX_ + 1 %></h3>
	<p>
	<%
	_HAS_FIELDS_ = false %>
	<% unless name.empty? then %><% if _HAS_FIELDS_ then %>; <% end %>
	<& name &><% _HAS_FIELDS_ = true;
	 end %>
	<% unless student_status.empty? then %><% if _HAS_FIELDS_ then %>; <% end %>
	<& student_status &><% _HAS_FIELDS_ = true;
	 end %>
	<% unless card_number.empty? then %><% if _HAS_FIELDS_ then %>; <% end %>
	Л.д. &#x2116;: <& card_number &><% _HAS_FIELDS_ = true;
	 end %>
	<% unless study_form.empty? then %><% if _HAS_FIELDS_ then %>; <% end %>
	Форма обучения: <& study_form &><% _HAS_FIELDS_ = true;
	 end %>
	<% unless profession.empty? then %><% if _HAS_FIELDS_ then %>; <% end %>
	Направление / специальность: <& profession &><% _HAS_FIELDS_ = true;
	 end %>
	<% unless citizenship.empty? then %><% if _HAS_FIELDS_ then %>; <% end %>
	Гражданство: <& citizenship &><% _HAS_FIELDS_ = true;
	 end %>
	<% if _CONDITIONS_['foreign'] then %>
	<% unless attributes['country_id'].empty? then %><% if _HAS_FIELDS_ then %>; <% end %>
	Страна: <& Classifier::Country[attributes['country_id']][:name] &>
	<% _HAS_FIELDS_ = true;
	 end %>
	<% end %>
	<% unless passport.empty? then %><% if _HAS_FIELDS_ then %>; <% end %>
	<% if order.attributes['citizenship'] == 2 then %>Паспорт: <% end %>: <& passport &><% _HAS_FIELDS_ = true;
	 end %>
	<% unless course.empty? then %><% if _HAS_FIELDS_ then %>; <% end %>
	Курс: <& course &><% _HAS_FIELDS_ = true;
	 end %>
	<% unless group.empty? then %><% if _HAS_FIELDS_ then %>; <% end %>
	Группа: <& group &><% _HAS_FIELDS_ = true;
	 end %>
	<% unless birth_date.empty? then %><% if _HAS_FIELDS_ then %>; <% end %>
	Дата рождения: <& birth_date &><% _HAS_FIELDS_ = true;
	 end %>
	<% if not _CONDITIONS_['dead'] then %>
	<% unless attributes['expelation_date'].empty? then %><% if _HAS_FIELDS_ then %>; <% end %>
	Дата отчисления: <&attributes['expelation_date']&>
	<% _HAS_FIELDS_ = true;
	 end %>
	<% end %>
	<% if _CONDITIONS_['dead'] then %>
	<% unless attributes['expelation_date'].empty? then %><% if _HAS_FIELDS_ then %>; <% end %>
	Дата исключения: <&attributes['expelation_date']&>
	<% _HAS_FIELDS_ = true;
	 end %>
	<% end %>
	<% unless false then %><% if _HAS_FIELDS_ then %>; <% end %>
	<%
					unless attributes['agreement'].empty?
						%>Договор (контракт) о предоставлении платных образовательных услуг: <& attributes['agreement'] &><%
					end
				%><% _HAS_FIELDS_ = true;
	 end %>
	<% if _CONDITIONS_['foreign'] then %>
	<% unless attributes['assignment'].empty? then %><% if _HAS_FIELDS_ then %>; <% end %>
	Направление Министерства образования и науки РФ: <&attributes['assignment']&>
	<% _HAS_FIELDS_ = true;
	 end %>
	<% end %>
	<% unless false then %><% if _HAS_FIELDS_ then %>; <% end %>
	Причина: <%

		if attributes['reason'].in? [0, 18] then
			liab1 = []; liab2 = []
			if attributes['liabilities'] then
				attributes['liabilities'].each { |exam|
					if exam['type'] == 'экзамен'
						liab1 << exam['subject']
					else
						liab2 << exam['subject']
					end
				}
			end
		end

		case attributes['reason']
		when 0
	%>за академическую задолженность по 3 и более дисциплинам  в <&attributes['term']&> семестре <&(attributes['term'].to_i+1)/2&>
	курса <&attributes['year']&> учебного года.
	Имеет задолженности: экзамены - [<&liab1.join(', ')&>], зачеты - [<&liab2.join(', ')&>];<%
		when 18
	%>за неликвидацию академической задолженности в установленные сроки в <&attributes['term']&> семестре <&(attributes['term'].to_i+1)/2&>
	курса <&attributes['year']&> учебного года.
	Имеет задолженности: экзамены - [<&liab1.join(', ')&>], зачеты - [<&liab2.join(', ')&>];<%
		when 2
	%>как не приступившего к занятиям на <&course&> курсе <&attributes['dnsa']&>;<%
		when 3
	%>за нарушение Правил внутреннего распорядка обучающихся в МГЛУ;<%
		when 4
	%>по собственному желанию;<%
		when 5
	%>по состоянию здоровья;<%
		when 6
	%>в связи с призывом в Вооруженные Силы РФ;<%
		when 7
	%>за систематические пропуски занятий без уважительных причин;<%
		when 9
	%>в связи с переводом в <&attributes['to']&>;<%
		when 10
	%>в связи со смертью;<%
		when 11
			if conditions['foreign'] then

			# оставлена авторская орфография
	%>за неисполнение обязательств по оплате образовательных услуг иностранным гражданином, предусмотренных контрактом<%
			else
	%>за неисполнение обязательств по оплате образовательных услуг, предусмотренных договором/контрактом;<%
			end
		when 12
	%>после академического отпуска, как не приступившего к занятиям <&attributes['dnsa']&>;<%
		when 19
	%>после стажировки, как не приступившего к занятиям <&attributes['dnsa2']&>;<%
		when 13
	%>за нарушение Правил приема и обучения иностранных граждан в МГЛУ;<%
		when 14
	%>неисполнение обязательств по договору (контракту);<%
		when 15
	%>как не представивший к защите выпускную квалификационную работу<%
		when 16
	%>как не прошедший итоговую государственную аттестацию<%
		when 17
	%>за невыполнение учебного плана по направлению подготовки (специальности) в установленные сроки по неуважительной причине;<%
		end
	%><% _HAS_FIELDS_ = true;
	 end %>
	<% unless false then %><% if _HAS_FIELDS_ then %>; <% end %>
	<%
	unless [5,6,10].member? attributes['reason'] then

		if conditions['dead'] then
	%>Основание исключения: <%
		else
	%>Основание отчисления: <%
		end

		case attributes['reason']
		when 0,2,7,12,15,16
	%>Приказ ректора об организации учебного процесса в МГЛУ, Положение о порядке ликвидации академической задолженности<%
		when 3,13
	%><%=attributes['basics']%>;<%
		when 4,9,17
	%>Правила внутреннего распорядка в МГЛУ;
	приказ ректора об организации учебного процесса в МГЛУ<%
		when 11,14
			if conditions['foreign'] then
	%>ст.7. Правил приема и обучения иностранных граждан в МГЛУ - неисполнение или ненадлежащее исполнение обязанностей иностранных граждан - учащихся Университета;<%
			else
	%>Правила внутреннего распорядка в МГЛУ<%
			end
		else
	%>Приказ ректора об организации учебного процесса в МГЛУ;<%
		end
	%> <% _HAS_FIELDS_ = true;
	 end %>
	<% unless false then %><% if _HAS_FIELDS_ then %>; <% end %>
	Общежитие: <%=dormitory ? 'Выселить установленным порядком' : 'В общежитии не проживал'%>;<% _HAS_FIELDS_ = true;
	 end %>
	<% unless false then %><% if _HAS_FIELDS_ then %>; <% end %>
	 <br/><br/>Основания приказа:
	<%
		if conditions['foreign'] then
			servnote = 'служебная записка декана ФОИГ с резолюцей ректора'
			visa = 'визой декана ФОИГ и'
		else
			servnote = 'служебная записка декана факультета с резолюцией ректора'
			visa = ''
		end
		case attributes['reason']

		when 0, 18
			case attributes['basics2']
			when 1
	%>служебная записка декана факультета с <%=visa%> резолюцией ректора<%
			when 2
	%>невыполнение сроков сдачи задолженностей в сроки, установленные переводным приказом<%
			end
		# По инициативе деканата
		when 2, 7, 12, 15, 16
	%>служебная записка декана факультета с <%=visa%> резолюцией ректора<%
		when 17
	%>служебная записка декана факультета с указанием дисциплин и процента невыполнения учебного плана
	с <%=visa%> резолюцией ректора<%

		# За нарушение правил внутреннего распорядка
		when 3
	%>акт о нарушении, объяснительная записка студента с резолюцией ректора<%

		# По инициативе студента
		when 4
	%>личное заявление студента с визой декана факультета<% if conditions['foreign'] then %>, декана ФОИГ<% end
	%> и резолюцией ректора<%
		when 9
	%>личное заявление студента с визой декана факультета<% if conditions['foreign'] then %>, декана ФОИГ<% end
	%> и резолюцией ректора; <%
	%>справка из учебного заведения, в которое переводится студент <%

		# По инициативе подразделения, курирующего студента (деканат/ОРИСА)
		when 5
	%>служебная записка декана факультета<% if conditions['foreign'] then %> с визой декана ФОИГ<% end %>,
	заключение клинико-экспертной комиссии <&attributes['resolution']&> <%
		when 6
	%><%=servnote%>, <%
	%>копия повестки военного комиссариата о призыве на военную службу <%
		when 10
	%>служебная записка декана факультета<% if conditions['foreign'] then %> с визой декана ФОИГ<% end %>,
	копия свидетельства о смерти <%
		when 11, 14
			if conditions['foreign'] then
	%>служебная записка декана ФОИГ с резолюцией ректора, <%
			else
	%>служебная записка руководителя ЦМОУ с резолюцией ректора, <%
			end
	%>договор (контракт) о предоставлении платных образовательных услуг <&attributes['agreement']&><%
			unless attributes['statement'].empty? then
	%>, копия Акта <&attributes['statement']&> на закрытие договора (контракта) о предоставлении платных образовательных услуг<%
			end
		when 13
	%><%=servnote%><%
		end

	end
	%>; <% _HAS_FIELDS_ = true;
	 end %>
	<% if _HAS_FIELDS_ then %>.<% end %>
	</p>
<% } %>

<% _SIGNATURE_INDEX_ = 0 %>
<table class="signatures">

	<% if (_SIGNATURE_INDEX_ += 1) == 2 then %><tr><td colspan="3"><b>Согласовано:</b></td></tr><% end %>
	<tr><td>Ректор</td><td class="signature">&nbsp;</td><td class="signspacer"/><td class="holder">И. И. Халеева</td><tr><tr><td></td><td class="small">(подпись)</td></tr>

	<% if (_SIGNATURE_INDEX_ += 1) == 2 then %><tr><td colspan="3"><b>Согласовано:</b></td></tr><% end %>
	<tr><td>Проректор по учебной работе</td><td class="signature">&nbsp;</td><td class="signspacer"/><td class="holder">И. В. Манохин</td><tr><tr><td></td><td class="small">(подпись)</td></tr>

	<% if (_SIGNATURE_INDEX_ += 1) == 2 then %><tr><td colspan="3"><b>Согласовано:</b></td></tr><% end %>
	<tr><td>Начальник управления бухгалтерского учета и финансового контроля</td><td class="signature">&nbsp;</td><td class="signspacer"/><td class="holder">Л. В. Куренкова</td><tr><tr><td></td><td class="small">(подпись)</td></tr>

	<% if (_SIGNATURE_INDEX_ += 1) == 2 then %><tr><td colspan="3"><b>Согласовано:</b></td></tr><% end %>
	<tr><td>Начальник планово-финансового управления</td><td class="signature">&nbsp;</td><td class="signspacer"/><td class="holder">Л. Н. Ермакова</td><tr><tr><td></td><td class="small">(подпись)</td></tr>

	<% if (_SIGNATURE_INDEX_ += 1) == 2 then %><tr><td colspan="3"><b>Согласовано:</b></td></tr><% end %>
	<tr><td>Начальник учебно-методического управления</td><td class="signature">&nbsp;</td><td class="signspacer"/><td class="holder">А. И. Коробко</td><tr><tr><td></td><td class="small">(подпись)</td></tr>

	<% if (_SIGNATURE_INDEX_ += 1) == 2 then %><tr><td colspan="3"><b>Согласовано:</b></td></tr><% end %>
	<tr><td>Начальник управления кадров</td><td class="signature">&nbsp;</td><td class="signspacer"/><td class="holder">Ю. И. Вторушин</td><tr><tr><td></td><td class="small">(подпись)</td></tr>

	<% if not _CONDITIONS_['disabled'] then %>
	<% if (_SIGNATURE_INDEX_ += 1) == 2 then %><tr><td colspan="3"><b>Согласовано:</b></td></tr><% end %>
	<tr><td><%=order.faculty.dean_position%></td><td class="signature">&nbsp;</td><td class="signspacer"/><td class="holder-unknown">&nbsp;</td><tr><tr><td></td><td class="small">(подпись)</td><td class="signspacer"/><td class="small">(расшифровка подписи)</td></tr>
	<% end %>

	<% if (_SIGNATURE_INDEX_ += 1) == 2 then %><tr><td colspan="3"><b>Согласовано:</b></td></tr><% end %>
	<tr><td>Советник ректора по правовым вопросам</td><td class="signature">&nbsp;</td><td class="signspacer"/><td class="holder">Н. А. Шулепов</td><tr><tr><td></td><td class="small">(подпись)</td></tr>

	<% if _CONDITIONS_['disabled'] then %>
	<% if (_SIGNATURE_INDEX_ += 1) == 2 then %><tr><td colspan="3"><b>Согласовано:</b></td></tr><% end %>
	<tr><td>Директор ГУИМЦ</td><td class="signature">&nbsp;</td><td class="signspacer"/><td class="holder-unknown">&nbsp;</td><tr><tr><td></td><td class="small">(подпись)</td><td class="signspacer"/><td class="small">(расшифровка подписи)</td></tr>
	<% end %>
</table>


<&import('footer', order)&>
