<!ATTR order !>
<!-- Generated by details-generator. Do not edit! -->
<%
_CONDITIONS_ = ::DetailsForIndividualScholarshipAssignmentOrder.order_conditions(order)
header = import 'header', order
header.conditions = conditions = _CONDITIONS_

%>
<&header&>
<p></p>
<div style="text-align: center"><h3>ПРИКАЗЫВАЮ:</h3></div>
<%
list = Class.new(Array)
list.class_eval {
	alias_method :_old_find, :find
	def find(params = nil)
		if params.nil?
			_old_find { |item| yield item }
		else
			_old_find { |item| ret = params.collect { |k,v| item[k] == v }.inject(true) { |x,y| x && y } }
		end
	end
}
self.class.class_eval {
	def fetch(obj, method, *args)
		keys = args[-1]
		ret = []
		obj.__send__(method, *args) { |*values|
			h = {}; keys.each_index { |i|
				h[keys[i].intern] = values[i]
			}; ret << h
		}
		ret
	end
}

_SETS_ = []
_GROUPS_ = nil
@students = list.new(
	  fetch(order, :each_student, :all, %w( group name group_id start_year course profession student_id attributes ))
)
_LIST_ = [@students]

	@groups = _GROUPS_ = list.new(
	fetch(order, :each_group, %w( group_id current_term_number group_num group short_name department_num attributes ))
) if order.respond_to? :each_group

%>

<p>
			<% case order.attributes['scholarship_id']
			when 10 then
				%>Следующих студентов, обучающихся за счет средств федерального бюджета и не имеющих
				академических задолженностей на момент подачи заявлений, назначить на государственную социальную стипендию
				в <& Term.current.academic_year.begin &>/<& Term.current.academic_year.end &> учебном году
				(<& order.attributes['period'] &>): <%
			when 3 then
				%>За достигнутые высокие результаты и примерную воинскую дисциплину по итогам обучения,
				сборов и стажировки в 2009 году объявить лауреатами ежегодной премии имени
				маршала Советского Союза Г.К. Жукова и наградить денежной премией согласно Положению о стипендии: <%
			when 13 then
				%>Остронуждающимся студентам очной формы обучения назначить дотации мэрии г. Москвы
				<& order.attributes['period'] &>: <%
			else
				%>Студентов, сдавших все экзамены и зачеты <& Term.current.even?? 'зимней' : 'летней' &> экзаменационной сессии
				<%= Term.prev.academic_year.begin %>/<%= Term.prev.academic_year.end %> учебного года, назначить на
				<& (if order.attributes['scholarship_id'] == 0 then
					order.attributes['custom_scholarship_id']
				else
					Classifier::Scholarship[order.attributes['scholarship_id']][:name]
				end).gsub('ая ', 'ую ').gsub('типендия', 'типендию') &>
				в <& Term.current.academic_year.begin &>/<& Term.current.academic_year.end &> учебном году
				(<& order.attributes['period'] &>): <%
			end %>
		</p>

<%
_SETS_.push Hash.new
_LIST_[-1].each { |item| (_SETS_[-1][item[:group]] ||= []) << item }
_SETS_[-1].keys.sort.each { |group|
	next if _SETS_[-1][group].empty?
	_LIST_.push _SETS_[-1][group]
	section_index = 0
%>

	<p> <h3>По группе <& group &></h3> </p>

	<ol>
	<% _LIST_[-1].each { |_ITEM_|
		group = _ITEM_[:group]
		name = _ITEM_[:name]
		group_id = _ITEM_[:group_id]
		start_year = _ITEM_[:start_year]
		course = _ITEM_[:course]
		profession = _ITEM_[:profession]
		attributes = _ITEM_[:attributes]
	%>
		<li>
		<% _HAS_FIELDS_ = false %>
			<% unless name.empty? then %><% if _HAS_FIELDS_ then %>;
			<% end %><& name &><% _HAS_FIELDS_ = true; end %>
			<% unless course.empty? then %><% if _HAS_FIELDS_ then %>;
			<% end %>Курс: <& course &><% _HAS_FIELDS_ = true; end %>
			<% unless profession.empty? then %><% if _HAS_FIELDS_ then %>;
			<% end %>Направление / специальность: <& profession &><% _HAS_FIELDS_ = true; end %>
			<% if _CONDITIONS_['zhukov'] then %>
			<% unless attributes['degree'].empty? then %><% if _HAS_FIELDS_ then %>;
			<% end %>степень: <%
			case attributes['degree']
			when 'первая'
				%>первая<%
			when 'вторая'
				%>вторая<%
			end
			%>
			<% _HAS_FIELDS_ = true; end %>
			<% end %>
			<% unless false then %><% if _HAS_FIELDS_ then %>;
			<% end %> <& attributes['amount'] &> <% _HAS_FIELDS_ = true; end %>
		</li>
	<% } %>
	</ol>

<%
	_LIST_.pop
}
_SETS_.pop
%>

<p>
			<br/><br/>Основания приказа:
			<% case order.attributes['scholarship_id']
			when 10,13 then
				%>личное заявление студента, справка установленного образца
				из государственных органов социальной защиты населения<%
			when 3 then
				%>служебная записка начальника КВО с резолюцией ректора,
				Положение о стипендии маршала Советского Союза Г. К. Жукова,
				объявленное приказом ректора МГЛУ<%
			else
				%>протокол заседания стипендиальной комиссии <& order.attributes['basics'] &><%
			end %>.
		</p>

<% _SIGNATURE_INDEX_ = 0 %>
<table class="signatures">

	<% if (_SIGNATURE_INDEX_ += 1) == 2 then %><tr><td colspan="3"><b>Согласовано:</b></td></tr><% end %>
	<tr><td>Ректор</td><td class="signature">&nbsp;</td><td class="signspacer"/><td class="holder">И. И. Халеева</td><tr><tr><td></td><td class="small">(подпись)</td></tr>

	<% if (_SIGNATURE_INDEX_ += 1) == 2 then %><tr><td colspan="3"><b>Согласовано:</b></td></tr><% end %>
	<tr><td>Проректор по учебной работе</td><td class="signature">&nbsp;</td><td class="signspacer"/><td class="holder">И. В. Манохин</td><tr><tr><td></td><td class="small">(подпись)</td></tr>

	<% if not _CONDITIONS_['zhukov'] then %>
	<% if (_SIGNATURE_INDEX_ += 1) == 2 then %><tr><td colspan="3"><b>Согласовано:</b></td></tr><% end %>
	<tr><td>Начальник управления бухгалтерского учета и финансового контроля</td><td class="signature">&nbsp;</td><td class="signspacer"/><td class="holder">Л. В. Куренкова</td><tr><tr><td></td><td class="small">(подпись)</td></tr>
	<% end %>

	<% if (_SIGNATURE_INDEX_ += 1) == 2 then %><tr><td colspan="3"><b>Согласовано:</b></td></tr><% end %>
	<tr><td>Начальник планово-финансового управления</td><td class="signature">&nbsp;</td><td class="signspacer"/><td class="holder">Л. Н. Ермакова</td><tr><tr><td></td><td class="small">(подпись)</td></tr>

	<% if (_SIGNATURE_INDEX_ += 1) == 2 then %><tr><td colspan="3"><b>Согласовано:</b></td></tr><% end %>
	<tr><td>Начальник учебно-методического управления</td><td class="signature">&nbsp;</td><td class="signspacer"/><td class="holder">А. И. Коробко</td><tr><tr><td></td><td class="small">(подпись)</td></tr>

	<% if (_SIGNATURE_INDEX_ += 1) == 2 then %><tr><td colspan="3"><b>Согласовано:</b></td></tr><% end %>
	<tr><td>Начальник управления кадров</td><td class="signature">&nbsp;</td><td class="signspacer"/><td class="holder">Ю. И. Вторушин</td><tr><tr><td></td><td class="small">(подпись)</td></tr>

	<% if not (_CONDITIONS_['disabled'] and _CONDITIONS_['high_courses']) and not _CONDITIONS_['zhukov'] and not _CONDITIONS_['foreign'] then %>
	<% if (_SIGNATURE_INDEX_ += 1) == 2 then %><tr><td colspan="3"><b>Согласовано:</b></td></tr><% end %>
	<tr><td><%=order.faculty.dean_position%></td><td class="signature">&nbsp;</td><td class="signspacer"/><td class="holder-unknown">&nbsp;</td><tr><tr><td></td><td class="small">(подпись)</td><td class="signspacer"/><td class="small">(расшифровка подписи)</td></tr>
	<% end %>

	<% if not (_CONDITIONS_['disabled'] and _CONDITIONS_['high_courses']) and not _CONDITIONS_['zhukov'] then %>
	<% if (_SIGNATURE_INDEX_ += 1) == 2 then %><tr><td colspan="3"><b>Согласовано:</b></td></tr><% end %>
	<tr><td>Зам. декана &laquo;<%=order.faculty.name%>&raquo;</td><td class="signature">&nbsp;</td><td class="signspacer"/><td class="holder-unknown">&nbsp;</td><tr><tr><td></td><td class="small">(подпись)</td><td class="signspacer"/><td class="small">(расшифровка подписи)</td></tr>
	<% end %>

	<% if _CONDITIONS_['disabled'] and _CONDITIONS_['high_courses'] and not _CONDITIONS_['zhkov'] then %>
	<% if (_SIGNATURE_INDEX_ += 1) == 2 then %><tr><td colspan="3"><b>Согласовано:</b></td></tr><% end %>
	<tr><td>Декан факультета ГУИМЦ</td><td class="signature">&nbsp;</td><td class="signspacer"/><td class="holder-unknown">&nbsp;</td><tr><tr><td></td><td class="small">(подпись)</td><td class="signspacer"/><td class="small">(расшифровка подписи)</td></tr>
	<% end %>

	<% if _CONDITIONS_['disabled'] and _CONDITIONS_['high_courses'] and not _CONDITIONS_['zhukov'] then %>
	<% if (_SIGNATURE_INDEX_ += 1) == 2 then %><tr><td colspan="3"><b>Согласовано:</b></td></tr><% end %>
	<tr><td>Зам. декана факультета ГУИМЦ</td><td class="signature">&nbsp;</td><td class="signspacer"/><td class="holder-unknown">&nbsp;</td><tr><tr><td></td><td class="small">(подпись)</td><td class="signspacer"/><td class="small">(расшифровка подписи)</td></tr>
	<% end %>

	<% if _CONDITIONS_['zhukov'] then %>
	<% if (_SIGNATURE_INDEX_ += 1) == 2 then %><tr><td colspan="3"><b>Согласовано:</b></td></tr><% end %>
	<tr><td>Начальник КВО</td><td class="signature">&nbsp;</td><td class="signspacer"/><td class="holder">С. И. Иванов</td><tr><tr><td></td><td class="small">(подпись)</td></tr>
	<% end %>

	<% if _CONDITIONS_['disabled'] and not _CONDITIONS_['high_courses'] and not _CONDITIONS_['zhukov'] then %>
	<% if (_SIGNATURE_INDEX_ += 1) == 2 then %><tr><td colspan="3"><b>Согласовано:</b></td></tr><% end %>
	<tr><td>Директор ГУИМЦ</td><td class="signature">&nbsp;</td><td class="signspacer"/><td class="holder-unknown">&nbsp;</td><tr><tr><td></td><td class="small">(подпись)</td><td class="signspacer"/><td class="small">(расшифровка подписи)</td></tr>
	<% end %>

	<% if _CONDITIONS_['foreign'] and not _CONDITIONS_['zhukov'] then %>
	<% if (_SIGNATURE_INDEX_ += 1) == 2 then %><tr><td colspan="3"><b>Согласовано:</b></td></tr><% end %>
	<tr><td>Декан ФОИГ</td><td class="signature">&nbsp;</td><td class="signspacer"/><td class="holder-unknown">&nbsp;</td><tr><tr><td></td><td class="small">(подпись)</td><td class="signspacer"/><td class="small">(расшифровка подписи)</td></tr>
	<% end %>
</table>


<&import('footer', order)&>
